//tealium universal tag - utag.167 ut4.0.201509101132, Copyright 2015 Tealium.com Inc. All Rights Reserved.
var needleParam=needleParam||{};try{(function(id,loader){var u=utag.o[loader].sender[id]={};u.ev={'view':1};u.map={"needle_category":"categoryId","order_id":"orderId","order_currency_code":"currencyCode"};u.extend=[function(a,b){try{if(typeof b['category_name']!='undefined'&&b['category_name']!=''){try{b['needle_category']=[b.category_name]}catch(e){}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||typeof u.ev.all!="undefined"){var c,d,e,f;u.data={"partnerId":"pcrichard"};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};c=[];for(d in utag.loader.GV(u.map)){if(typeof b[d]!="undefined"&&b[d]!=""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
u.data.categoryId=u.data.categoryId||(typeof b._ccat!="undefined"?b._ccat.slice(0):[]);u.data.productId=u.data.productId||(typeof b._cprod!="undefined"?b._cprod.slice(0):[]);u.data.productQuan=u.data.productQuan||(typeof b._cquan!="undefined"?b._cquan.slice(0):[]);u.data.productPrice=u.data.productPrice||(typeof b._cprice!="undefined"?b._cprice.slice(0):[]);u.data.orderId=u.data.orderId||b._corder||"";u.data.currencyCode=u.data.currencyCode||b._ccurrency||"";if(u.data.orderId!=""){u.data.events=u.data.events||"purchase";window.needleParam.events=u.data.events;if(u.data.currencyCode!=""){window.needleParam.currencyCode=u.data.currencyCode;}
window.needleParam.orderId=u.data.orderId;u.data.orderItems=[];for(var i=0;i<u.data.productId.length;i++){var item=[];item.push(u.data.productId[i],u.data.productQuan[i]||"1",u.data.productPrice[i]||"1");item=item.join(":");u.data.orderItems.push(item);}
u.data.orderItems=u.data.orderItems.join(",");window.needleParam.orderItems=u.data.orderItems;}else{window.needleParam.categoryId=u.data.categoryId.join(",");window.needleParam.productId=u.data.productId.join(",");if(u.data.productPrice.length>0){window.needleParam.productPrice=u.data.productPrice.join(",");}}
u.data.base_url=u.data.base_url||"//"+u.data.partnerId+".needle.com/needle_service.js";u.s=document.getElementsByTagName("script")[0];u.scr=document.createElement("script");u.scr.type="text/javascript";u.scr.src=u.data.base_url;u.s.parentNode.insertBefore(u.scr,u.s);}}
utag.o[loader].loader.LOAD(id);})('167','pcrichard.main');}catch(e){}
